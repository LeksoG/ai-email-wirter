<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI Tools Suite - Transform Your Communication</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg,
                #e0e7ff 0%,
                #f3e8ff 25%,
                #ddd6fe 50%,
                #e0e7ff 75%,
                #f0f9ff 100%
            );
            background-size: 400% 400%;
            animation: subtle-shift 20s ease infinite;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
            padding-top: 80px;
        }

        body.dark-mode {
            background: linear-gradient(135deg,
                #000000 0%,
                #0a0a0a 25%,
                #1a1a1a 50%,
                #0a0a0a 75%,
                #000000 100%
            );
        }

        body.dark-mode .glass-effect {
            background: rgba(20, 20, 20, 0.85);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        body.dark-mode .glass-dark {
            background: rgba(30, 30, 30, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        body.dark-mode .text-gray-800,
        body.dark-mode .text-gray-700 {
            color: #e5e5e5 !important;
        }

        body.dark-mode .text-gray-600,
        body.dark-mode .text-gray-500 {
            color: #a0a0a0 !important;
        }

        body.dark-mode .custom-textarea {
            background: rgba(30, 30, 30, 0.8);
            color: #e5e5e5;
        }

        body.dark-mode .sticky-header {
            background: rgba(10, 10, 10, 0.7);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        body.dark-mode .action-btn {
            background: rgba(40, 40, 40, 0.9);
            border: 1px solid rgba(99, 102, 241, 0.4);
            color: #e5e5e5;
        }

        body.dark-mode .action-btn:hover {
            background: rgba(60, 60, 60, 1);
            border-color: rgba(99, 102, 241, 0.6);
        }

        @keyframes subtle-shift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(99, 102, 241, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(99, 102, 241, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            pointer-events: none;
            z-index: 0;
        }

        .page-container {
            animation: blur-in 1.2s ease-out;
        }

        @keyframes blur-in {
            0% {
                opacity: 0;
                filter: blur(20px);
                transform: scale(0.95);
            }
            100% {
                opacity: 1;
                filter: blur(0);
                transform: scale(1);
            }
        }

        .glass-effect {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.95);
            box-shadow: 0 8px 32px rgba(99, 102, 241, 0.08);
        }

        .glass-dark {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.85);
            box-shadow: 0 4px 16px rgba(99, 102, 241, 0.05);
        }

        .ai-glow {
            box-shadow: 0 0 30px rgba(99, 102, 241, 0.15),
                        0 0 60px rgba(139, 92, 246, 0.1);
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .oval-button {
            border-radius: 50px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .oval-button:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 10px 25px rgba(99, 102, 241, 0.2);
        }

        textarea:focus, input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
        }

        .custom-textarea {
            background: rgba(255, 255, 255, 0.8);
            border: 2px solid rgba(99, 102, 241, 0.25);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 15px;
            line-height: 1.6;
        }

        .custom-textarea:focus {
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid rgba(99, 102, 241, 0.5);
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1),
                        0 8px 24px rgba(99, 102, 241, 0.15);
            transform: translateY(-2px);
        }

        .tab-container {
            position: relative;
            display: inline-flex;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 50px;
            padding: 6px;
            margin-bottom: 24px;
        }

        .tab-slider {
            position: absolute;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            border-radius: 50px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 0;
        }

        .loading-lines {
            display: flex;
            flex-direction: column;
            gap: 16px;
            width: 100%;
            padding: 20px 0;
        }

        .loading-line {
            height: 12px;
            background: linear-gradient(90deg,
                rgba(99, 102, 241, 0.1) 0%,
                rgba(139, 92, 246, 0.6) 50%,
                rgba(99, 102, 241, 0.1) 100%
            );
            background-size: 200% 100%;
            border-radius: 20px;
            animation: loading-wave 2s ease-in-out infinite;
            position: relative;
            overflow: hidden;
        }

        .loading-line::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg,
                transparent 0%,
                rgba(255, 255, 255, 0.4) 50%,
                transparent 100%
            );
            animation: loading-shine 2s ease-in-out infinite;
        }

        .loading-line:nth-child(1) { animation-delay: 0s; width: 95%; }
        .loading-line:nth-child(2) { animation-delay: 0.15s; width: 88%; }
        .loading-line:nth-child(3) { animation-delay: 0.3s; width: 92%; }
        .loading-line:nth-child(4) { animation-delay: 0.45s; width: 85%; }
        .loading-line:nth-child(5) { animation-delay: 0.6s; width: 90%; }
        .loading-line:nth-child(6) { animation-delay: 0.75s; width: 80%; }

        @keyframes loading-wave {
            0%, 100% {
                background-position: -200% 0;
                transform: scaleX(0.98);
                opacity: 0.7;
            }
            50% {
                background-position: 200% 0;
                transform: scaleX(1);
                opacity: 1;
            }
        }

        @keyframes loading-shine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .wave-char {
            display: inline-block;
            opacity: 0;
            animation: wave-appear 0.15s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        @keyframes wave-appear {
            0% {
                opacity: 0;
                transform: translateY(8px) scale(0.95);
                filter: blur(2px);
            }
            60% {
                opacity: 1;
                transform: translateY(-2px) scale(1.02);
                filter: blur(0);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
                filter: blur(0);
            }
        }

        .result-container {
            position: relative;
            min-height: 300px;
        }

        .email-item {
            transition: all 0.2s ease;
            position: relative;
        }

        .email-item:hover {
            background: rgba(99, 102, 241, 0.1);
            transform: translateX(5px);
        }

        .email-deleting {
            animation: slide-fade-delete 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards !important;
            pointer-events: none !important;
            overflow: hidden !important;
        }

        @keyframes slide-fade-delete {
            0% {
                opacity: 1;
                transform: translateX(0) scale(1);
                max-height: 300px;
                margin-bottom: 12px;
            }
            30% {
                opacity: 0.7;
                transform: translateX(-30px) scale(0.98);
            }
            60% {
                opacity: 0.3;
                transform: translateX(-80px) scale(0.95);
            }
            100% {
                opacity: 0;
                transform: translateX(-150px) scale(0.9);
                max-height: 0;
                margin-bottom: 0;
                padding-top: 0;
                padding-bottom: 0;
            }
        }

        .modern-email-item {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%);
            border: 2px solid rgba(99, 102, 241, 0.15);
            border-radius: 20px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .modern-email-item:hover {
            transform: translateY(-5px) translateX(5px);
            box-shadow: 0 12px 35px rgba(99, 102, 241, 0.2);
            border-color: rgba(99, 102, 241, 0.4);
        }

        body.dark-mode .modern-email-item {
            background: linear-gradient(135deg, rgba(40, 40, 40, 0.95) 0%, rgba(30, 30, 30, 0.85) 100%);
            border-color: rgba(99, 102, 241, 0.3);
        }

        .email-hover-buttons {
            position: absolute;
            top: 12px;
            right: 16px;
            display: none;
            gap: 8px;
            z-index: 10;
        }

        .email-item:hover .email-hover-buttons,
        .modern-email-item:hover .email-hover-buttons,
        .priority-email-stacked:hover .email-hover-buttons {
            display: flex;
        }

        .email-hover-btn {
            padding: 4px 12px;
            font-size: 11px;
            font-weight: 600;
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .email-hover-btn:hover {
            background: rgba(99, 102, 241, 0.1);
            border-color: rgba(99, 102, 241, 0.5);
        }

        .summary-popup {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            margin-top: 12px;
            background: white;
            border: 2px solid rgba(99, 102, 241, 0.3);
            border-radius: 16px;
            padding: 16px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
            z-index: 50;
            animation: popup-slide-down 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        body.dark-mode .summary-popup {
            background: rgba(30, 30, 30, 0.95);
            border-color: rgba(99, 102, 241, 0.5);
        }

        @keyframes popup-slide-down {
            from {
                opacity: 0;
                transform: translateY(-10px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .sticky-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 50;
            background: rgba(255, 255, 255, 0.4);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 16px rgba(99, 102, 241, 0.05);
            animation: header-slide-down 0.3s ease-out;
        }

        @keyframes header-slide-down {
            from {
                transform: translateY(-100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .action-buttons {
            display: flex;
            gap: 8px;
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 10;
        }

        .action-btn {
            padding: 6px 16px;
            font-size: 12px;
            font-weight: 600;
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .action-btn:hover {
            background: rgba(255, 255, 255, 1);
            border-color: rgba(99, 102, 241, 0.5);
            transform: translateY(-1px);
        }

        .undo-delete-button {
            position: fixed;
            bottom: 32px;
            left: 50%;
            transform: translateX(-50%);
            padding: 12px 24px;
            background: rgba(20, 20, 20, 0.95);
            color: white;
            border-radius: 50px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            animation: undo-slide-up 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .undo-delete-button:hover {
            background: rgba(40, 40, 40, 0.95);
            transform: translateX(-50%) translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
        }

        @keyframes undo-slide-up {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(60px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }

        .prioritize-wave {
            height: 60px;
            background: linear-gradient(90deg,
                rgba(99, 102, 241, 0.1) 0%,
                rgba(139, 92, 246, 0.3) 25%,
                rgba(167, 139, 250, 0.4) 50%,
                rgba(139, 92, 246, 0.3) 75%,
                rgba(99, 102, 241, 0.1) 100%
            );
            background-size: 200% 100%;
            animation: prioritize-wave-motion 2s ease-in-out infinite;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: #6366f1;
            margin-bottom: 24px;
        }

        @keyframes prioritize-wave-motion {
            0%, 100% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
        }

        .priority-container {
            position: relative;
            margin-bottom: 32px;
            padding: 24px;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.08) 0%, rgba(139, 92, 246, 0.08) 100%);
            border-radius: 24px;
            border: 2px solid rgba(99, 102, 241, 0.25);
            box-shadow: 0 4px 20px rgba(99, 102, 241, 0.1);
            animation: priority-container-appear 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes priority-container-appear {
            from {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        body.dark-mode .priority-container {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.15) 0%, rgba(139, 92, 246, 0.15) 100%);
            border-color: rgba(99, 102, 241, 0.4);
        }

        .priority-container-glow {
            animation: priority-smooth-glow 2.5s cubic-bezier(0.4, 0, 0.2, 1) forwards !important;
        }

        @keyframes priority-smooth-glow {
            0% {
                box-shadow: 0 4px 20px rgba(99, 102, 241, 0.1);
            }
            40% {
                box-shadow: 0 8px 40px rgba(99, 102, 241, 0.5),
                            0 4px 80px rgba(139, 92, 246, 0.4),
                            inset 0 0 40px rgba(99, 102, 241, 0.2);
            }
            100% {
                box-shadow: 0 4px 20px rgba(99, 102, 241, 0.1);
            }
        }

        .priority-section-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #6366f1;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        body.dark-mode .priority-section-title {
            color: #a5b4fc;
        }

        .inbox-section-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #374151;
            margin-top: 32px;
            margin-bottom: 16px;
            padding-top: 24px;
            border-top: 2px solid rgba(99, 102, 241, 0.2);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        body.dark-mode .inbox-section-title {
            color: #e5e5e5;
            border-top-color: rgba(99, 102, 241, 0.4);
        }

        .priority-email-stacked {
            position: relative;
            width: 100%;
            background: rgba(255, 255, 255, 0.98);
            border: 2px solid rgba(99, 102, 241, 0.4);
            border-radius: 16px;
            padding: 16px;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.15);
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            margin-bottom: 12px;
            cursor: pointer;
        }

        body.dark-mode .priority-email-stacked {
            background: rgba(40, 40, 40, 0.95);
            border-color: rgba(99, 102, 241, 0.5);
            color: #e5e5e5;
        }

        .priority-email-stacked:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(99, 102, 241, 0.25);
        }

        .email-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(99, 102, 241, 0.5);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .email-checkbox.checked {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            border-color: #6366f1;
        }

        .email-checkbox:hover {
            border-color: #6366f1;
            transform: scale(1.1);
        }

        .unread-label {
            position: absolute;
            top: 12px;
            right: 16px;
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            font-size: 11px;
            font-weight: 700;
            padding: 4px 10px;
            border-radius: 12px;
            z-index: 5;
        }

        .unread-email {
            border-left: 4px solid #ef4444;
        }

        .new-email-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            font-size: 11px;
            font-weight: 700;
            padding: 2px 6px;
            border-radius: 10px;
            min-width: 20px;
            text-align: center;
            animation: badge-pulse 1.5s ease-in-out infinite;
            box-shadow: 0 2px 8px rgba(239, 68, 68, 0.5);
        }

        @keyframes badge-pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 2px 8px rgba(239, 68, 68, 0.5);
            }
            50% {
                transform: scale(1.1);
                box-shadow: 0 4px 12px rgba(239, 68, 68, 0.7);
            }
        }

        .email-ladder-animation {
            animation: ladder-slide-in 0.4s ease-out backwards;
        }

        @keyframes ladder-slide-in {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .search-input {
            width: 100%;
            padding: 12px 20px;
            border: 2px solid rgba(99, 102, 241, 0.3);
            border-radius: 50px;
            font-size: 14px;
            background: rgba(255, 255, 255, 0.9);
            transition: all 0.3s;
        }

        .search-input:focus {
            outline: none;
            border-color: rgba(99, 102, 241, 0.5);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        body.dark-mode .search-input {
            background: rgba(30, 30, 30, 0.8);
            color: #e5e5e5;
        }

        .gmail-icon {
            width: 20px;
            height: 20px;
            display: inline-block;
        }

        .send-button-float {
            position: absolute;
            bottom: 16px;
            right: 16px;
            padding: 12px 20px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border-radius: 50px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 10;
        }

        .send-button-float:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);
        }

        .email-viewer-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(8px);
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .email-viewer-container {
            width: 90%;
            max-width: 900px;
            height: 90vh;
            background: white;
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
        }

        body.dark-mode .email-viewer-container {
            background: rgba(20, 20, 20, 0.95);
        }

        .ai-transform-container {
            position: relative;
            max-width: 800px;
            margin: 0 auto;
        }

        .ai-transform-input {
            width: 100%;
            padding: 12px 140px 12px 20px;
            border: 2px solid rgba(99, 102, 241, 0.3);
            border-radius: 50px;
            font-size: 14px;
            background: rgba(255, 255, 255, 0.9);
            transition: all 0.3s;
        }

        .ai-transform-input:focus {
            outline: none;
            border-color: rgba(99, 102, 241, 0.5);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        body.dark-mode .ai-transform-input {
            background: rgba(30, 30, 30, 0.8);
            color: #e5e5e5;
        }

        .ai-transform-button {
            position: absolute;
            right: 6px;
            top: 50%;
            transform: translateY(-50%);
            padding: 8px 20px;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .ai-transform-button:hover {
            opacity: 0.9;
        }

        .ai-transform-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .tab-button-container {
            background: rgba(255, 255, 255, 0.6);
            border: 2px solid rgba(99, 102, 241, 0.2);
            box-shadow: 0 4px 16px rgba(99, 102, 241, 0.1);
        }

        .priority-preview-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-top: 16px;
        }

        .priority-preview-card {
            padding: 16px;
            border-radius: 16px;
            border: 2px solid;
            transition: all 0.3s;
            position: relative;
        }

        .priority-preview-off {
            background: rgba(200, 200, 200, 0.1);
            border-color: rgba(150, 150, 150, 0.3);
        }

        .priority-preview-on {
            background: rgba(99, 102, 241, 0.05);
            border-color: rgba(99, 102, 241, 0.3);
        }

        .priority-mode-active {
            border-width: 3px;
            box-shadow: 0 8px 24px rgba(99, 102, 241, 0.3);
            transform: scale(1.02);
        }

        .priority-mode-inactive {
            opacity: 0.7;
        }

        .priority-mode-inactive:hover {
            opacity: 1;
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .mode-checkmark {
            position: absolute;
            top: 12px;
            right: 12px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 700;
        }

        body.dark-mode .priority-preview-off {
            background: rgba(60, 60, 60, 0.3);
            border-color: rgba(120, 120, 120, 0.4);
        }

        body.dark-mode .priority-preview-on {
            background: rgba(99, 102, 241, 0.15);
            border-color: rgba(99, 102, 241, 0.5);
        }

        .preview-label {
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
            padding: 4px 10px;
            border-radius: 8px;
            display: inline-block;
        }

        .preview-label-off {
            background: rgba(150, 150, 150, 0.2);
            color: #666;
        }

        .preview-label-on {
            background: rgba(99, 102, 241, 0.2);
            color: #6366f1;
        }

        body.dark-mode .preview-label-off {
            background: rgba(120, 120, 120, 0.3);
            color: #aaa;
        }

        body.dark-mode .preview-label-on {
            background: rgba(99, 102, 241, 0.3);
            color: #a5b4fc;
        }

        /* MOBILE NAV - ONLY SHOW ON MOBILE */
        .mobile-nav-toggle {
            display: none;
        }

        .mobile-nav-menu {
            display: none;
        }

        @media (max-width: 768px) {
            input, textarea, select, button {
                font-size: 16px !important;
            }

            .mobile-nav-toggle {
                display: block;
                position: fixed;
                top: 20px;
                right: 20px;
                z-index: 1000;
                background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
                color: white;
                padding: 12px 16px;
                border-radius: 50px;
                border: none;
                cursor: pointer;
                box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
                transition: all 0.3s ease;
            }

            .mobile-nav-menu {
                position: fixed;
                top: 70px;
                right: 20px;
                background: rgba(255, 255, 255, 0.95);
                backdrop-filter: blur(25px);
                border-radius: 20px;
                padding: 12px;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
                z-index: 999;
                display: none;
                flex-direction: column;
                gap: 8px;
                min-width: 200px;
            }

            .mobile-nav-menu.open {
                display: flex;
            }

            body.dark-mode .mobile-nav-menu {
                background: rgba(30, 30, 30, 0.95);
            }

            .desktop-nav {
                display: none !important;
            }

            body {
                padding-top: 20px;
            }

            .sticky-header {
                display: none;
            }
        }

        @media (min-width: 769px) {
            .mobile-nav-toggle {
                display: none !important;
            }

            .mobile-nav-menu {
                display: none !important;
            }

            .desktop-nav {
                display: flex !important;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const App = () => {
            const [currentPage, setCurrentPage] = useState('home');
            const [activeTab, setActiveTab] = useState('email');
            const [activeView, setActiveView] = useState('writer');
            const [emailText, setEmailText] = useState('');
            const [customPrompt, setCustomPrompt] = useState('');
            const [result, setResult] = useState('');
            const [isProcessing, setIsProcessing] = useState(false);
            const [showSuggestions, setShowSuggestions] = useState(false);
            const [emailConnected, setEmailConnected] = useState(false);
            const [selectedTone, setSelectedTone] = useState(null);
            const [uploadedFile, setUploadedFile] = useState(null);
            const [savedResults, setSavedResults] = useState([]);
            const [viewingFile, setViewingFile] = useState(null);
            const [darkMode, setDarkMode] = useState(false);
            const [gmailEmails, setGmailEmails] = useState([]);
            const [sentEmails, setSentEmails] = useState([]);
            const [showSuggestionsEnabled, setShowSuggestionsEnabled] = useState(true);
            const [userEmail, setUserEmail] = useState('');
            const [viewingEmail, setViewingEmail] = useState(null);
            const [emailReply, setEmailReply] = useState('');
            const [replyPrompt, setReplyPrompt] = useState('');
            const [summarizingEmail, setSummarizingEmail] = useState(null);
            const [summaryText, setSummaryText] = useState('');
            const [isSummarizing, setIsSummarizing] = useState(false);
            const [summaryHidden, setSummaryHidden] = useState(false);
            const [selectedEmails, setSelectedEmails] = useState([]);
            const [deletedEmail, setDeletedEmail] = useState(null);
            const [showUndoDelete, setShowUndoDelete] = useState(false);
            const [isPrioritizing, setIsPrioritizing] = useState(false);
            const [locallyDeletedEmailIds, setLocallyDeletedEmailIds] = useState(() => {
                const saved = localStorage.getItem('deletedEmailIds');
                return saved ? new Set(JSON.parse(saved)) : new Set();
            });
            const [mobileNavOpen, setMobileNavOpen] = useState(false);
            const [isRewritingReply, setIsRewritingReply] = useState(false);
            const [autoPrioritize, setAutoPrioritize] = useState(false);
            const [priorityEmails, setPriorityEmails] = useState([]);
            const [isSending, setIsSending] = useState(false);
            const [showEnvelope, setShowEnvelope] = useState(false);
            const [showPriorityGlow, setShowPriorityGlow] = useState(false);
            const [newEmailCount, setNewEmailCount] = useState(0);
            const [unreadEmails, setUnreadEmails] = useState(new Set());
            const [showInboxExpand, setShowInboxExpand] = useState(false);
            const [userName, setUserName] = useState('');

            const audioRef = useRef(null);
            const sendAudioRef = useRef(null);
            const deletingEmailsRef = useRef(new Set());

            useEffect(() => {
                const urlParams = new URLSearchParams(window.location.search);
                const tokensParam = urlParams.get('tokens');

                if (tokensParam) {
                    try {
                        const tokens = JSON.parse(decodeURIComponent(tokensParam));
                        localStorage.setItem('gmailTokens', JSON.stringify(tokens));
                        localStorage.setItem('emailConnected', 'true');
                        localStorage.removeItem('oauth_in_progress');
                        setEmailConnected(true);

                        fetch('https://www.googleapis.com/oauth2/v2/userinfo', {
                            headers: { Authorization: `Bearer ${tokens.access_token}` }
                        })
                        .then(res => res.json())
                        .then(userInfo => {
                            setUserEmail(userInfo.email);
                            localStorage.setItem('userEmail', userInfo.email);
                            const name = userInfo.given_name || userInfo.name?.split(' ')[0] || 'there';
                            setUserName(name);
                            localStorage.setItem('userName', name);
                        });

                        fetchGmailEmails(tokens.access_token);
                        fetchSentEmails(tokens.access_token);
                        window.history.replaceState({}, '', '/');
                    } catch (error) {
                        console.error('‚ùå Error processing OAuth tokens:', error);
                    }
                }

                const savedConnection = localStorage.getItem('emailConnected');
                const savedTokens = localStorage.getItem('gmailTokens');
                const savedUserEmail = localStorage.getItem('userEmail');
                const savedUserName = localStorage.getItem('userName');
                const savedShowSuggestions = localStorage.getItem('showSuggestions');

                if (savedUserEmail) setUserEmail(savedUserEmail);
                if (savedUserName) setUserName(savedUserName);
                if (savedShowSuggestions !== null) {
                    setShowSuggestionsEnabled(savedShowSuggestions === 'true');
                }

                if (savedConnection === 'true' && savedTokens) {
                    setEmailConnected(true);
                    try {
                        const tokens = JSON.parse(savedTokens);
                        fetchGmailEmails(tokens.access_token);
                        fetchSentEmails(tokens.access_token);
                    } catch (error) {
                        console.error('‚ùå Error loading saved tokens:', error);
                        localStorage.removeItem('gmailTokens');
                        localStorage.removeItem('emailConnected');
                        localStorage.removeItem('userEmail');
                        setEmailConnected(false);
                        setUserEmail('');
                    }
                }

                const savedDarkMode = localStorage.getItem('darkMode');
                if (savedDarkMode === 'true') {
                    setDarkMode(true);
                    document.body.classList.add('dark-mode');
                }
            }, []);

            useEffect(() => {
                if (darkMode) {
                    document.body.classList.add('dark-mode');
                    localStorage.setItem('darkMode', 'true');
                } else {
                    document.body.classList.remove('dark-mode');
                    localStorage.setItem('darkMode', 'false');
                }
            }, [darkMode]);

            useEffect(() => {
                localStorage.setItem('deletedEmailIds', JSON.stringify(Array.from(locallyDeletedEmailIds)));
            }, [locallyDeletedEmailIds]);

            useEffect(() => {
                if (showSuggestionsEnabled && customPrompt.length > 0) {
                    setShowSuggestions(true);
                } else {
                    setShowSuggestions(false);
                }
            }, [customPrompt, showSuggestionsEnabled]);

            useEffect(() => {
                audioRef.current = new Audio('/mixkit-magic-marimba-2820.wav');
                audioRef.current.load();
                sendAudioRef.current = new Audio('/whoosh-motion-405445.mp3');
                sendAudioRef.current.load();

                const savedAutoPrioritize = localStorage.getItem('autoPrioritize');
                if (savedAutoPrioritize === 'true') {
                    setAutoPrioritize(true);
                }
            }, []);

            useEffect(() => {
                if (showUndoDelete) {
                    const timer = setTimeout(() => {
                        setShowUndoDelete(false);
                        setDeletedEmail(null);
                    }, 5000);
                    return () => clearTimeout(timer);
                }
            }, [showUndoDelete]);

            useEffect(() => {
                if (autoPrioritize && gmailEmails.length > 0 && currentPage === 'inbox' && priorityEmails.length === 0) {
                    handlePrioritizeEmails();
                }
            }, [autoPrioritize, gmailEmails.length, currentPage]);

            useEffect(() => {
                if (currentPage === 'inbox' && newEmailCount > 0) {
                    const timer = setTimeout(() => {
                        setNewEmailCount(0);
                    }, 2000);
                    return () => clearTimeout(timer);
                }
            }, [currentPage, newEmailCount]);

            const playNotificationSound = () => {
                if (audioRef.current) {
                    audioRef.current.currentTime = 0;
                    audioRef.current.play().catch(e => console.log('Sound play failed:', e));
                }
            };

            const playSendSound = () => {
                if (sendAudioRef.current) {
                    sendAudioRef.current.currentTime = 0;
                    sendAudioRef.current.play().catch(e => console.log('Send sound failed:', e));
                }
            };

            const handleSendEmail = async () => {
                if (!emailReply || !viewingEmail) return;
                setIsSending(true);

                try {
                    const savedTokens = localStorage.getItem('gmailTokens');
                    if (!savedTokens) {
                        alert('‚ö†Ô∏è Not connected to Gmail. Please connect your account in Settings.');
                        setIsSending(false);
                        return;
                    }

                    const tokens = JSON.parse(savedTokens);
                    const extractEmail = (fromString) => {
                        const match = fromString.match(/<(.+?)>/);
                        return match ? match[1] : fromString;
                    };

                    const recipientEmail = extractEmail(viewingEmail.from);
                    const originalSubject = viewingEmail.subject;
                    const replySubject = originalSubject.startsWith('Re:') ? originalSubject : `Re: ${originalSubject}`;

                    const response = await fetch('/api/gmail-send', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            accessToken: tokens.access_token,
                            to: recipientEmail,
                            subject: replySubject,
                            body: emailReply,
                            threadId: viewingEmail.threadId,
                            messageId: viewingEmail.id
                        })
                    });

                    const data = await response.json();
                    if (!response.ok) throw new Error(data.message || 'Failed to send email');

                    setShowEnvelope(true);
                    playSendSound();

                    setTimeout(() => {
                        alert('‚úâÔ∏è Reply sent successfully!');
                        setEmailReply('');
                        setReplyPrompt('');
                        setViewingEmail(null);
                        setIsSending(false);
                        setTimeout(() => setShowEnvelope(false), 1500);
                    }, 1000);
                } catch (error) {
                    console.error('‚ùå Error sending email:', error);
                    alert(`‚ùå Failed to send email: ${error.message}`);
                    setIsSending(false);
                }
            };

            const emailStyles = [
                { id: 'professional', label: 'üíº Professional' },
                { id: 'friendly', label: 'üòä Friendly' },
                { id: 'concise', label: '‚ö° Concise' },
                { id: 'persuasive', label: 'üéØ Persuasive' },
                { id: 'apologetic', label: 'üôè Apologetic' },
                { id: 'enthusiastic', label: 'üöÄ Enthusiastic' }
            ];

            const generalSuggestions = [
                { id: 'longer', label: 'üìè Make Longer', prompt: 'Expand this email with more details and context' },
                { id: 'clearer', label: 'üí° More Clear', prompt: 'Rewrite this email to be more clear and understandable' },
                { id: 'simpler', label: 'üî§ Simplify', prompt: 'Simplify this email to be easier to understand' },
                { id: 'formal', label: 'üé© More Formal', prompt: 'Make this email more formal and professional' },
                { id: 'action', label: '‚ö° Add Action Items', prompt: 'Add clear action items and next steps to this email' },
                { id: 'polite', label: 'üåü More Polite', prompt: 'Make this email more polite and courteous' }
            ];

            const handleGmailConnect = async () => {
                try {
                    const response = await fetch('/api/gmail-auth');
                    if (!response.ok) throw new Error('Failed to initiate OAuth');
                    const data = await response.json();
                    localStorage.setItem('oauth_in_progress', 'true');
                    window.location.href = data.authUrl;
                } catch (error) {
                    console.error('‚ùå Gmail OAuth error:', error);
                }
            };

            const isTokenExpired = (expiryDate) => {
                if (!expiryDate) return true;
                return Date.now() >= (expiryDate - 300000);
            };

            const refreshAccessToken = async () => {
                try {
                    const savedTokens = localStorage.getItem('gmailTokens');
                    if (!savedTokens) throw new Error('No tokens found');

                    const tokens = JSON.parse(savedTokens);
                    if (!tokens.refresh_token) throw new Error('No refresh token available');

                    const response = await fetch('/api/gmail-refresh', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ refreshToken: tokens.refresh_token })
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(errorData.message || 'Failed to refresh token');
                    }

                    const data = await response.json();
                    const updatedTokens = {
                        ...tokens,
                        access_token: data.access_token,
                        expiry_date: data.expiry_date
                    };
                    localStorage.setItem('gmailTokens', JSON.stringify(updatedTokens));
                    return data.access_token;
                } catch (error) {
                    console.error('‚ùå Token refresh failed:', error);
                    localStorage.removeItem('gmailTokens');
                    localStorage.removeItem('emailConnected');
                    localStorage.removeItem('userEmail');
                    setEmailConnected(false);
                    setUserEmail('');
                    alert('Your session has expired. Please reconnect your Gmail account.');
                    throw error;
                }
            };

            const fetchGmailEmails = async (accessToken, isRetry = false) => {
                try {
                    const savedTokens = localStorage.getItem('gmailTokens');
                    if (savedTokens && !isRetry) {
                        const tokens = JSON.parse(savedTokens);
                        if (isTokenExpired(tokens.expiry_date)) {
                            const newAccessToken = await refreshAccessToken();
                            return fetchGmailEmails(newAccessToken, true);
                        }
                    }

                    const response = await fetch('/api/gmail-inbox', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ accessToken })
                    });

                    const data = await response.json();

                    if (!response.ok) {
                        if ((response.status === 401 || response.status === 403) && !isRetry) {
                            const newAccessToken = await refreshAccessToken();
                            return fetchGmailEmails(newAccessToken, true);
                        }
                        throw new Error(data.message || 'Failed to fetch emails');
                    }

                    const formattedEmails = data.emails.map(email => {
                        const headers = email.payload.headers;
                        return {
                            id: email.id,
                            from: headers.find(h => h.name === 'From')?.value || 'Unknown',
                            subject: headers.find(h => h.name === 'Subject')?.value || 'No Subject',
                            snippet: email.snippet,
                            date: new Date(parseInt(email.internalDate)).toLocaleString(),
                            internalDate: email.internalDate,
                            threadId: email.threadId,
                            messageId: headers.find(h => h.name === 'Message-ID')?.value || ''
                        };
                    });

                    setGmailEmails(prevEmails => {
                        // Filter out deleted AND currently deleting emails
                        const currentlyDeleting = Array.from(deletingEmailsRef.current);
                        const allExcluded = new Set([...locallyDeletedEmailIds, ...currentlyDeleting]);
                        const filteredEmails = formattedEmails.filter(e => !allExcluded.has(e.id));
                        
                        // Only check for new emails if not in delete operation
                        if (deletingEmailsRef.current.size === 0) {
                            const prevEmailIds = new Set(prevEmails.map(e => e.id));
                            const allPrevIds = new Set([...prevEmailIds, ...Array.from(locallyDeletedEmailIds)]);
                            const newEmails = filteredEmails.filter(e => !allPrevIds.has(e.id));

                            if (newEmails.length > 0 && prevEmails.length > 0) {
                                setNewEmailCount(prev => prev + newEmails.length);
                                setUnreadEmails(prev => {
                                    const updated = new Set(prev);
                                    newEmails.forEach(e => updated.add(e.id));
                                    return updated;
                                });
                                setShowInboxExpand(true);
                                setTimeout(() => setShowInboxExpand(false), 3000);
                                playNotificationSound();
                            }
                        }

                        return filteredEmails;
                    });
                } catch (error) {
                    console.error('‚ùå Error fetching emails:', error);
                }
            };

            const fetchSentEmails = async (accessToken, isRetry = false) => {
                try {
                    const savedTokens = localStorage.getItem('gmailTokens');
                    if (savedTokens && !isRetry) {
                        const tokens = JSON.parse(savedTokens);
                        if (isTokenExpired(tokens.expiry_date)) {
                            const newAccessToken = await refreshAccessToken();
                            return fetchSentEmails(newAccessToken, true);
                        }
                    }

                    const response = await fetch('/api/gmail-sent', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ accessToken })
                    });

                    const data = await response.json();

                    if (!response.ok) {
                        if ((response.status === 401 || response.status === 403) && !isRetry) {
                            const newAccessToken = await refreshAccessToken();
                            return fetchSentEmails(newAccessToken, true);
                        }
                        throw new Error(data.message || 'Failed to fetch sent emails');
                    }

                    const formattedEmails = data.emails.map(email => {
                        const headers = email.payload.headers;
                        return {
                            id: email.id,
                            to: headers.find(h => h.name === 'To')?.value || 'Unknown',
                            subject: headers.find(h => h.name === 'Subject')?.value || 'No Subject',
                            snippet: email.snippet,
                            date: new Date(parseInt(email.internalDate)).toLocaleString()
                        };
                    });

                    setSentEmails(formattedEmails);
                } catch (error) {
                    console.error('‚ùå Error fetching sent emails:', error);
                }
            };

            const callAIAPI = async (prompt, text) => {
                try {
                    const response = await fetch('/api/transform', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ prompt, text })
                    });

                    if (!response.ok) {
                        const contentType = response.headers.get('content-type');
                        let errorMessage = 'API request failed';
                        if (contentType && contentType.includes('application/json')) {
                            const errorData = await response.json();
                            errorMessage = errorData.error || errorMessage;
                        }
                        throw new Error(errorMessage);
                    }

                    const data = await response.json();
                    return data.result;
                } catch (error) {
                    console.error('‚ùå API Error:', error.message);
                    throw error;
                }
            };

            const animateText = (text) => {
                const resultElement = document.getElementById('result-text');
                if (!resultElement) return;

                resultElement.innerHTML = '';
                const lines = text.split('\n');

                lines.forEach((line, lineIndex) => {
                    const words = line.split(' ');
                    words.forEach((word, wordIndex) => {
                        const wordSpan = document.createElement('span');
                        wordSpan.className = 'wave-char';
                        wordSpan.textContent = word;
                        const diagonalDelay = (lineIndex + wordIndex * 0.3) * 0.015;
                        wordSpan.style.animationDelay = `${diagonalDelay}s`;
                        resultElement.appendChild(wordSpan);

                        if (wordIndex < words.length - 1) {
                            const space = document.createTextNode(' ');
                            resultElement.appendChild(space);
                        }
                    });

                    if (lineIndex < lines.length - 1) {
                        const br = document.createElement('br');
                        resultElement.appendChild(br);
                    }
                });
            };

            const handleStyleClick = (style) => {
                setSelectedTone(style);
            };

            const handleGenerate = async () => {
                if (!selectedTone && !customPrompt) return;

                const textToProcess = uploadedFile?.content || emailText;
                if (!textToProcess || textToProcess.trim().length === 0) {
                    alert('Please enter some text or upload a file before generating!');
                    return;
                }

                setIsProcessing(true);
                setResult('');
                setActiveView('results');

                let prompt = customPrompt;

                if (selectedTone && !customPrompt) {
                    const prompts = {
                        professional: 'Rewrite this email in a professional, formal business tone',
                        friendly: 'Rewrite this email in a warm, friendly, and approachable tone',
                        concise: 'Rewrite this email to be brief and to the point',
                        persuasive: 'Rewrite this email to be compelling and convincing',
                        apologetic: 'Rewrite this email with a sincere and apologetic tone',
                        enthusiastic: 'Rewrite this email with an energetic and enthusiastic tone'
                    };
                    prompt = prompts[selectedTone];
                } else if (selectedTone && customPrompt) {
                    const toneLabel = emailStyles.find(s => s.id === selectedTone)?.label || '';
                    prompt = `${customPrompt} in a ${toneLabel} tone`;
                }

                try {
                    const transformedText = await callAIAPI(prompt, textToProcess);
                    setResult(transformedText);

                    const newResult = {
                        id: Date.now(),
                        content: transformedText,
                        prompt: prompt,
                        originalText: textToProcess,
                        timestamp: new Date().toLocaleString(),
                        tone: selectedTone
                    };
                    setSavedResults(prev => [newResult, ...prev]);

                    setIsProcessing(false);
                    setTimeout(() => animateText(transformedText), 100);
                } catch (error) {
                    setResult(`Error: ${error.message}`);
                    setIsProcessing(false);
                }
            };

            const handleFileUpload = (e) => {
                const file = e.target.files[0];
                if (!file) return;

                const reader = new FileReader();
                reader.onload = (event) => {
                    setUploadedFile({
                        name: file.name,
                        content: event.target.result,
                        size: file.size
                    });
                    setEmailText('');
                };
                reader.readAsText(file);
            };

            const handleRetry = async () => {
                if (!savedResults.length) return;

                const lastResult = savedResults[0];
                setIsProcessing(true);
                setResult('');

                try {
                    const transformedText = await callAIAPI(lastResult.prompt, lastResult.originalText);
                    setResult(transformedText);

                    const newResult = {
                        id: Date.now(),
                        content: transformedText,
                        prompt: lastResult.prompt,
                        originalText: lastResult.originalText,
                        timestamp: new Date().toLocaleString(),
                        tone: lastResult.tone
                    };
                    setSavedResults(prev => [newResult, ...prev]);

                    setIsProcessing(false);
                    setTimeout(() => animateText(transformedText), 100);
                } catch (error) {
                    setResult(`Error: ${error.message}`);
                    setIsProcessing(false);
                }
            };

            const renderSettings = () => {
                return (
                    <div className="space-y-8">
                        <div className="glass-effect rounded-3xl p-8 ai-glow">
                            <h2 className="text-3xl font-bold text-gray-800 mb-6">‚öôÔ∏è Settings</h2>

                            <div className="space-y-6">
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-3">
                                        üåô Dark Mode
                                    </label>
                                    <div className="flex items-center justify-between glass-dark px-4 py-3 rounded-xl">
                                        <span className="text-sm text-gray-700">Enable dark theme</span>
                                        <button
                                            onClick={() => setDarkMode(!darkMode)}
                                            className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${
                                                darkMode ? 'bg-indigo-600' : 'bg-gray-300'
                                            }`}
                                        >
                                            <span
                                                className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${
                                                    darkMode ? 'translate-x-6' : 'translate-x-1'
                                                }`}
                                            />
                                        </button>
                                    </div>
                                </div>

                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-3">
                                        üí° Show Suggestions
                                    </label>
                                    <div className="flex items-center justify-between glass-dark px-4 py-3 rounded-xl">
                                        <span className="text-sm text-gray-700">Show AI tone suggestions while typing</span>
                                        <button
                                            onClick={() => {
                                                const newValue = !showSuggestionsEnabled;
                                                setShowSuggestionsEnabled(newValue);
                                                localStorage.setItem('showSuggestions', newValue.toString());
                                            }}
                                            className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${
                                                showSuggestionsEnabled ? 'bg-indigo-600' : 'bg-gray-300'
                                            }`}
                                        >
                                            <span
                                                className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${
                                                    showSuggestionsEnabled ? 'translate-x-6' : 'translate-x-1'
                                                }`}
                                            />
                                        </button>
                                    </div>
                                </div>

                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-3">
                                        ‚ú® Priority Mode - Choose Your Preference
                                    </label>
                                    <div className="text-xs text-gray-600 mb-4" style={{color: darkMode ? '#aaa' : '#666'}}>
                                        Click a mode below to activate it
                                    </div>

                                    <div className="priority-preview-grid">
                                        <button
                                            onClick={() => {
                                                setAutoPrioritize(false);
                                                localStorage.setItem('autoPrioritize', 'false');
                                                setPriorityEmails([]);
                                                playNotificationSound();
                                            }}
                                            className={`priority-preview-card priority-preview-off ${!autoPrioritize ? 'priority-mode-active' : 'priority-mode-inactive'}`}
                                            style={{cursor: 'pointer', textAlign: 'left'}}
                                        >
                                            <div className="preview-label preview-label-off">Manual Priority</div>
                                            <div className="text-xs text-gray-600 mb-3" style={{color: darkMode ? '#aaa' : '#666'}}>
                                                Emails show in chronological order. Click "Prioritize" button to analyze.
                                            </div>
                                            <div className="space-y-2">
                                                <div style={{padding: '8px', background: darkMode ? 'rgba(60,60,60,0.5)' : 'rgba(200,200,200,0.3)', borderRadius: '8px', fontSize: '11px'}}>
                                                    üìß Newsletter: Weekly Update
                                                </div>
                                                <div style={{padding: '8px', background: darkMode ? 'rgba(60,60,60,0.5)' : 'rgba(200,200,200,0.3)', borderRadius: '8px', fontSize: '11px'}}>
                                                    üìß Friend: Let's catch up
                                                </div>
                                                <div style={{padding: '8px', background: darkMode ? 'rgba(60,60,60,0.5)' : 'rgba(200,200,200,0.3)', borderRadius: '8px', fontSize: '11px'}}>
                                                    üìß URGENT: Meeting in 1 hour
                                                </div>
                                            </div>
                                            {!autoPrioritize && <div className="mode-checkmark">‚úì Active</div>}
                                        </button>

                                        <button
                                            onClick={() => {
                                                setAutoPrioritize(true);
                                                localStorage.setItem('autoPrioritize', 'true');
                                                playNotificationSound();
                                            }}
                                            className={`priority-preview-card priority-preview-on ${autoPrioritize ? 'priority-mode-active' : 'priority-mode-inactive'}`}
                                            style={{cursor: 'pointer', textAlign: 'left'}}
                                        >
                                            <div className="preview-label preview-label-on">Auto Priority</div>
                                            <div className="text-xs text-gray-600 mb-3" style={{color: darkMode ? '#a5b4fc' : '#6366f1'}}>
                                                AI automatically stacks urgent emails at the top of your inbox.
                                            </div>
                                            <div className="space-y-2">
                                                <div style={{padding: '8px', background: 'linear-gradient(135deg, rgba(99,102,241,0.2), rgba(139,92,246,0.2))', border: '2px solid rgba(99,102,241,0.4)', borderRadius: '8px', fontSize: '11px', fontWeight: 600}}>
                                                    ‚ö° URGENT: Meeting in 1 hour
                                                </div>
                                                <div style={{padding: '8px', background: darkMode ? 'rgba(60,60,60,0.5)' : 'rgba(200,200,200,0.3)', borderRadius: '8px', fontSize: '11px'}}>
                                                    üìß Friend: Let's catch up
                                                </div>
                                                <div style={{padding: '8px', background: darkMode ? 'rgba(60,60,60,0.5)' : 'rgba(200,200,200,0.3)', borderRadius: '8px', fontSize: '11px'}}>
                                                    üìß Newsletter: Weekly Update
                                                </div>
                                            </div>
                                            {autoPrioritize && <div className="mode-checkmark">‚úì Active</div>}
                                        </button>
                                    </div>
                                </div>

                                <div className="pt-6 border-t border-gray-300">
                                    <label className="block text-sm font-semibold text-gray-700 mb-3">
                                        üìß Email Connection
                                    </label>
                                    <p className="text-xs text-gray-600 mb-4">
                                        Connect your Gmail to access and transform your messages
                                    </p>

                                    {!emailConnected ? (
                                        <button
                                            onClick={handleGmailConnect}
                                            className="w-full px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-full font-medium hover:from-indigo-600 hover:to-purple-700 transition-all oval-button flex items-center justify-center gap-3"
                                        >
                                            <svg className="gmail-icon" viewBox="0 0 24 24" fill="white">
                                                <path d="M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-2.023 2.309-3.178 3.927-1.964L12 9.545l8.073-6.052C21.69 2.28 24 3.434 24 5.457z"/>
                                            </svg>
                                            Connect Gmail
                                        </button>
                                    ) : (
                                        <div className="flex items-center justify-between glass-dark px-4 py-3 rounded-xl">
                                            <div className="flex items-center gap-3">
                                                <svg className="gmail-icon" viewBox="0 0 24 24" fill="#10b981">
                                                    <path d="M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-2.023 2.309-3.178 3.927-1.964L12 9.545l8.073-6.052C21.69 2.28 24 3.434 24 5.457z"/>
                                                </svg>
                                                <div className="flex flex-col">
                                                    <span className="text-sm font-medium text-gray-700">Connected to Gmail</span>
                                                    {userEmail && <span className="text-xs text-gray-600 mt-1">{userEmail}</span>}
                                                </div>
                                            </div>
                                            <button
                                                onClick={() => {
                                                    setEmailConnected(false);
                                                    localStorage.removeItem('emailConnected');
                                                    localStorage.removeItem('gmailTokens');
                                                    localStorage.removeItem('userEmail');
                                                    setGmailEmails([]);
                                                    setSentEmails([]);
                                                    setUserEmail('');
                                                    setPriorityEmails([]);
                                                }}
                                                className="text-xs text-red-600 hover:text-red-700"
                                            >
                                                Disconnect
                                            </button>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            const handleSummarizeEmail = async (email) => {
                setSummarizingEmail(email.id);
                setIsSummarizing(true);
                setSummaryText('');
                setSummaryHidden(false);

                try {
                    const summary = await callAIAPI('Summarize this email concisely in 2-3 sentences', email.snippet);
                    setSummaryText(summary);
                    setIsSummarizing(false);
                } catch (error) {
                    setSummaryText('Failed to summarize email');
                    setIsSummarizing(false);
                }
            };

            const handleDeleteEmail = (emailId, type = 'inbox') => {
                playNotificationSound();

                // Add to deleting set
                deletingEmailsRef.current.add(emailId);

                const emailToDelete = type === 'inbox'
                    ? gmailEmails.find(e => e.id === emailId)
                    : sentEmails.find(e => e.id === emailId);

                setDeletedEmail({ email: emailToDelete, type });
                setShowUndoDelete(true);

                if (type === 'inbox') {
                    setLocallyDeletedEmailIds(prev => {
                        const updated = new Set(prev);
                        updated.add(emailId);
                        return updated;
                    });
                }

                const emailElement = document.querySelector(`[data-email-id="${emailId}"]`);
                if (emailElement) {
                    emailElement.classList.add('email-deleting');
                    setTimeout(() => {
                        if (type === 'inbox') {
                            setGmailEmails(prev => prev.filter(e => e.id !== emailId));
                            // Also remove from priority emails if present
                            setPriorityEmails(prev => prev.filter(e => e.id !== emailId));
                        } else {
                            setSentEmails(prev => prev.filter(e => e.id !== emailId));
                        }
                        // Remove from deleting set after deletion is complete
                        deletingEmailsRef.current.delete(emailId);
                    }, 500);
                }
            };

            const handleUndoDelete = () => {
                if (deletedEmail) {
                    playNotificationSound();
                    
                    // Remove from deleting set
                    deletingEmailsRef.current.delete(deletedEmail.email.id);
                    
                    if (deletedEmail.type === 'inbox') {
                        setGmailEmails(prev => [deletedEmail.email, ...prev]);
                        setLocallyDeletedEmailIds(prev => {
                            const updated = new Set(prev);
                            updated.delete(deletedEmail.email.id);
                            return updated;
                        });
                    } else {
                        setSentEmails(prev => [deletedEmail.email, ...prev]);
                    }
                    setShowUndoDelete(false);
                    setDeletedEmail(null);
                }
            };

            const handleDeleteSelected = (type = 'inbox') => {
                if (selectedEmails.length === 0) return;
                playNotificationSound();

                // Add all selected to deleting set
                selectedEmails.forEach(id => deletingEmailsRef.current.add(id));

                if (type === 'inbox') {
                    setLocallyDeletedEmailIds(prev => {
                        const updated = new Set(prev);
                        selectedEmails.forEach(id => updated.add(id));
                        return updated;
                    });
                    setGmailEmails(prev => prev.filter(e => !selectedEmails.includes(e.id)));
                    setPriorityEmails(prev => prev.filter(e => !selectedEmails.includes(e.id)));
                } else {
                    setSentEmails(prev => prev.filter(e => !selectedEmails.includes(e.id)));
                }
                
                // Remove from deleting set after deletion
                setTimeout(() => {
                    selectedEmails.forEach(id => deletingEmailsRef.current.delete(id));
                }, 500);
                
                setSelectedEmails([]);
            };

            const handleDeleteAll = (type = 'inbox') => {
                playNotificationSound();
                const confirmDelete = confirm(`Are you sure you want to delete all ${type} emails?`);
                if (confirmDelete) {
                    if (type === 'inbox') {
                        // Add all to deleting set
                        gmailEmails.forEach(e => deletingEmailsRef.current.add(e.id));
                        
                        setLocallyDeletedEmailIds(prev => {
                            const updated = new Set(prev);
                            gmailEmails.forEach(e => updated.add(e.id));
                            return updated;
                        });
                        setGmailEmails([]);
                        setPriorityEmails([]);
                        
                        // Clear deleting set after deletion
                        setTimeout(() => {
                            deletingEmailsRef.current.clear();
                        }, 500);
                    } else {
                        setSentEmails([]);
                    }
                }
            };

            const toggleEmailSelection = (emailId) => {
                setSelectedEmails(prev => {
                    if (prev.includes(emailId)) {
                        return prev.filter(id => id !== emailId);
                    } else {
                        return [...prev, emailId];
                    }
                });
            };

            const handlePrioritizeEmails = async () => {
                if (gmailEmails.length === 0) return;

                playNotificationSound();
                setIsPrioritizing(true);

                const analyzePriority = (email) => {
                    let score = 0;
                    const subjectLower = email.subject.toLowerCase();
                    const snippetLower = email.snippet.toLowerCase();

                    if (subjectLower.match(/urgent|asap|important|critical|emergency|priority/)) score += 10;
                    if (snippetLower.match(/urgent|asap|important|critical|emergency|priority/)) score += 5;
                    if (subjectLower.match(/action required|respond|reply|feedback|review/)) score += 7;
                    if (snippetLower.match(/action required|respond|reply|feedback|review/)) score += 3;
                    if (subjectLower.match(/today|tomorrow|deadline|due|meeting/)) score += 8;
                    if (snippetLower.match(/today|tomorrow|deadline|due|meeting/)) score += 4;
                    if (subjectLower.includes('?')) score += 5;
                    if (email.from.match(/boss|ceo|manager|director/i)) score += 6;

                    return score;
                };

                setTimeout(() => {
                    const scoredEmails = gmailEmails.map(email => ({
                        ...email,
                        priorityScore: analyzePriority(email)
                    }));

                    scoredEmails.sort((a, b) => b.priorityScore - a.priorityScore);

                    const priorityThreshold = 5;
                    const priority = scoredEmails.filter(e => e.priorityScore >= priorityThreshold).slice(0, 5);

                    setPriorityEmails(priority);
                    setIsPrioritizing(false);

                    if (priority.length > 0) {
                        setShowPriorityGlow(true);
                        setTimeout(() => setShowPriorityGlow(false), 2500);
                    }
                }, 2000);
            };

            const handleRewriteReply = async () => {
                if (!emailReply || !replyPrompt) return;

                setIsRewritingReply(true);
                playNotificationSound();

                try {
                    const needsStructure = replyPrompt.toLowerCase().includes('structure') ||
                                         replyPrompt.toLowerCase().includes('format') ||
                                         emailReply.match(/^(Hi|Hello|Hey|Dear)/i) === null;

                    let finalPrompt = replyPrompt;
                    if (needsStructure) {
                        finalPrompt += ' Make sure to format it as a proper email with greeting, body, and closing.';
                    }

                    const response = await fetch('/api/transform', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            prompt: finalPrompt,
                            text: emailReply,
                            temperature: 0.7
                        })
                    });

                    const data = await response.json();

                    if (data.result) {
                        setEmailReply(data.result);
                        setReplyPrompt('');
                    }

                    setIsRewritingReply(false);
                } catch (error) {
                    setIsRewritingReply(false);
                }
            };

            const renderInbox = () => {
                // Filter out priority emails from regular inbox list
                const regularEmails = gmailEmails.filter(email => 
                    !priorityEmails.find(p => p.id === email.id)
                );

                return (
                    <div className="space-y-6">
                        <div className="glass-effect rounded-3xl p-8 ai-glow">
                            <div className="flex justify-between items-center mb-6">
                                <h2 className="text-3xl font-bold text-gray-800">üì• Inbox</h2>
                                <div className="flex gap-3">
                                    {gmailEmails.length > 0 && (
                                        <>
                                            <button
                                                onClick={async () => {
                                                    const savedTokens = localStorage.getItem('gmailTokens');
                                                    if (savedTokens) {
                                                        const tokens = JSON.parse(savedTokens);
                                                        await fetchGmailEmails(tokens.access_token);
                                                    }
                                                }}
                                                className="oval-button px-4 py-2 text-sm font-semibold text-white"
                                                style={{
                                                    background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)'
                                                }}
                                            >
                                                üîÑ Refresh
                                            </button>
                                            {!autoPrioritize && (
                                                <button
                                                    onClick={() => handlePrioritizeEmails()}
                                                    disabled={isPrioritizing}
                                                    className="oval-button px-4 py-2 text-sm font-semibold text-white"
                                                    style={{
                                                        background: isPrioritizing
                                                            ? 'rgba(99, 102, 241, 0.5)'
                                                            : 'linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)',
                                                        cursor: isPrioritizing ? 'not-allowed' : 'pointer'
                                                    }}
                                                >
                                                    {isPrioritizing ? 'ü§ñ Prioritizing...' : '‚ú® Prioritize Emails'}
                                                </button>
                                            )}
                                            {selectedEmails.length > 0 && (
                                                <button
                                                    onClick={() => handleDeleteSelected('inbox')}
                                                    className="oval-button px-4 py-2 text-sm font-semibold text-white bg-red-500 hover:bg-red-600"
                                                >
                                                    üóëÔ∏è Delete Selected ({selectedEmails.length})
                                                </button>
                                            )}
                                            <button
                                                onClick={() => handleDeleteAll('inbox')}
                                                className="oval-button px-4 py-2 text-sm font-semibold text-white bg-red-500 hover:bg-red-600"
                                            >
                                                üóëÔ∏è Delete All
                                            </button>
                                        </>
                                    )}
                                </div>
                            </div>

                            {isPrioritizing && (
                                <div className="prioritize-wave">
                                    <span>ü§ñ AI is analyzing and prioritizing your emails...</span>
                                </div>
                            )}

                            {/* PRIORITY EMAILS SECTION */}
                            {priorityEmails.length > 0 && !isPrioritizing && (
                                <>
                                    <div className={`priority-container ${showPriorityGlow ? 'priority-container-glow' : ''}`}>
                                        <div className="priority-section-title">
                                            <span>‚ö° Priority Emails</span>
                                            <span style={{fontSize: '0.875rem', fontWeight: '600', background: 'rgba(255,255,255,0.3)', padding: '4px 12px', borderRadius: '12px'}}>
                                                {priorityEmails.length} {priorityEmails.length === 1 ? 'email' : 'emails'}
                                            </span>
                                        </div>

                                        <div className="space-y-3">
                                            {priorityEmails.map((email, index) => (
                                                <div
                                                    key={email.id}
                                                    data-email-id={email.id}
                                                    onClick={() => {
                                                        setViewingEmail(email);
                                                        if (unreadEmails.has(email.id)) {
                                                            setUnreadEmails(prev => {
                                                                const updated = new Set(prev);
                                                                updated.delete(email.id);
                                                                return updated;
                                                            });
                                                        }
                                                    }}
                                                    className={`priority-email-stacked ${unreadEmails.has(email.id) ? 'unread-email' : ''}`}
                                                    style={{animationDelay: `${index * 0.1}s`}}
                                                >
                                                    {unreadEmails.has(email.id) && (
                                                        <div className="unread-label">UNREAD</div>
                                                    )}
                                                    <div className="email-hover-buttons">
                                                        <button
                                                            onClick={(e) => {
                                                                e.stopPropagation();
                                                                handleSummarizeEmail(email);
                                                            }}
                                                            className="email-hover-btn"
                                                            style={{
                                                                background: 'linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)',
                                                                color: 'white',
                                                                border: 'none'
                                                            }}
                                                        >
                                                            Summarize
                                                        </button>
                                                        <button
                                                            onClick={(e) => {
                                                                e.stopPropagation();
                                                                handleDeleteEmail(email.id, 'inbox');
                                                            }}
                                                            className="email-hover-btn"
                                                            style={{
                                                                background: 'rgba(239, 68, 68, 0.9)',
                                                                color: 'white',
                                                                border: 'none'
                                                            }}
                                                        >
                                                            Delete
                                                        </button>
                                                    </div>
                                                    <div className="flex justify-between items-start">
                                                        <div className="flex-1">
                                                            <div className="text-sm font-bold text-gray-800 mb-1">{email.from}</div>
                                                            <div className="text-base font-semibold text-gray-700 mb-1">{email.subject}</div>
                                                            <div className="text-sm text-gray-600 mt-2">{email.snippet}</div>
                                                        </div>
                                                    </div>

                                                    {summarizingEmail === email.id && (
                                                        <div className="summary-popup" onClick={(e) => e.stopPropagation()}>
                                                            {isSummarizing ? (
                                                                <div className="space-y-3">
                                                                    <div className="flex items-center gap-3 mb-3">
                                                                        <div className="animate-spin rounded-full h-5 w-5 border-2 border-indigo-600 border-t-transparent"></div>
                                                                        <span className="text-sm text-gray-700 font-medium">Summarizing...</span>
                                                                    </div>
                                                                    <div className="space-y-2">
                                                                        <div className="loading-line" style={{height: '8px'}}></div>
                                                                        <div className="loading-line" style={{height: '8px'}}></div>
                                                                        <div className="loading-line" style={{height: '8px'}}></div>
                                                                    </div>
                                                                </div>
                                                            ) : (
                                                                <div>
                                                                    <div className="flex justify-between items-center mb-2">
                                                                        <span className="text-sm font-bold text-indigo-600">‚ú® Summary</span>
                                                                        <button
                                                                            onClick={() => setSummaryHidden(!summaryHidden)}
                                                                            className="text-xs text-indigo-600 hover:text-indigo-800 font-semibold"
                                                                        >
                                                                            {summaryHidden ? 'Show' : 'Hide'}
                                                                        </button>
                                                                    </div>
                                                                    {!summaryHidden && (
                                                                        <p className="text-sm text-gray-700 leading-relaxed">{summaryText}</p>
                                                                    )}
                                                                </div>
                                                            )}
                                                        </div>
                                                    )}
                                                </div>
                                            ))}
                                        </div>
                                    </div>

                                    {/* INBOX SECTION TITLE */}
                                    <div className="inbox-section-title">
                                        <span>üì¨ Inbox</span>
                                        <span className="text-sm text-gray-500" style={{fontWeight: '400'}}>
                                            {regularEmails.length} {regularEmails.length === 1 ? 'email' : 'emails'}
                                        </span>
                                    </div>
                                </>
                            )}

                            {/* REGULAR INBOX EMAILS */}
                            <div className="space-y-3">
                                {regularEmails.length > 0 ? (
                                    regularEmails.map((email, index) => (
                                        <div
                                            key={email.id}
                                            data-email-id={email.id}
                                            onClick={() => {
                                                setViewingEmail(email);
                                                if (unreadEmails.has(email.id)) {
                                                    setUnreadEmails(prev => {
                                                        const updated = new Set(prev);
                                                        updated.delete(email.id);
                                                        return updated;
                                                    });
                                                }
                                            }}
                                            className={`modern-email-item email-ladder-animation ${unreadEmails.has(email.id) ? 'unread-email' : ''}`}
                                            style={{animationDelay: `${index * 0.05}s`}}
                                        >
                                            {unreadEmails.has(email.id) && (
                                                <div className="unread-label">UNREAD</div>
                                            )}

                                            <div
                                                onClick={(e) => {
                                                    e.stopPropagation();
                                                    toggleEmailSelection(email.id);
                                                }}
                                                className={`email-checkbox ${selectedEmails.includes(email.id) ? 'checked' : ''}`}
                                                style={{
                                                    position: 'absolute',
                                                    left: '16px',
                                                    top: '16px'
                                                }}
                                            >
                                                {selectedEmails.includes(email.id) && <span style={{color: 'white', fontSize: '12px'}}>‚úì</span>}
                                            </div>

                                            <div className="email-hover-buttons">
                                                <button
                                                    onClick={(e) => {
                                                        e.stopPropagation();
                                                        handleSummarizeEmail(email);
                                                    }}
                                                    className="email-hover-btn"
                                                    style={{
                                                        background: 'linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)',
                                                        color: 'white',
                                                        border: 'none'
                                                    }}
                                                >
                                                    Summarize
                                                </button>
                                                <button
                                                    onClick={(e) => {
                                                        e.stopPropagation();
                                                        setViewingEmail(email);
                                                        setTimeout(() => setEmailReply(''), 300);
                                                    }}
                                                    className="email-hover-btn"
                                                >
                                                    Reply
                                                </button>
                                                <button
                                                    onClick={(e) => {
                                                        e.stopPropagation();
                                                        handleDeleteEmail(email.id, 'inbox');
                                                    }}
                                                    className="email-hover-btn"
                                                    style={{
                                                        background: 'rgba(239, 68, 68, 0.9)',
                                                        color: 'white',
                                                        border: 'none'
                                                    }}
                                                >
                                                    Delete
                                                </button>
                                            </div>

                                            <div style={{marginLeft: '40px'}}>
                                                <div className="flex justify-between items-start mb-2">
                                                    <span className="text-sm font-bold text-gray-800">{email.from}</span>
                                                    <span className="text-xs text-gray-500">{email.date}</span>
                                                </div>
                                                <div className="text-base font-semibold text-gray-700 mb-2">{email.subject}</div>
                                                <div className="text-sm text-gray-600">{email.snippet}</div>
                                            </div>

                                            {summarizingEmail === email.id && (
                                                <div className="summary-popup" onClick={(e) => e.stopPropagation()}>
                                                    {isSummarizing ? (
                                                        <div className="space-y-3">
                                                            <div className="flex items-center gap-3 mb-3">
                                                                <div className="animate-spin rounded-full h-5 w-5 border-2 border-indigo-600 border-t-transparent"></div>
                                                                <span className="text-sm text-gray-700 font-medium">Summarizing...</span>
                                                            </div>
                                                            <div className="space-y-2">
                                                                <div className="loading-line" style={{height: '8px'}}></div>
                                                                <div className="loading-line" style={{height: '8px'}}></div>
                                                                <div className="loading-line" style={{height: '8px'}}></div>
                                                            </div>
                                                        </div>
                                                    ) : (
                                                        <div>
                                                            <div className="flex justify-between items-center mb-2">
                                                                <span className="text-sm font-bold text-indigo-600">‚ú® Summary</span>
                                                                <button
                                                                    onClick={() => setSummaryHidden(!summaryHidden)}
                                                                    className="text-xs text-indigo-600 hover:text-indigo-800 font-semibold"
                                                                >
                                                                    {summaryHidden ? 'Show' : 'Hide'}
                                                                </button>
                                                            </div>
                                                            {!summaryHidden && (
                                                                <p className="text-sm text-gray-700 leading-relaxed">{summaryText}</p>
                                                            )}
                                                        </div>
                                                    )}
                                                </div>
                                            )}
                                        </div>
                                    ))
                                ) : (
                                    gmailEmails.length === 0 && priorityEmails.length === 0 && (
                                        <div className="text-center py-12 text-gray-500">
                                            <div className="text-6xl mb-4">üì≠</div>
                                            <p>No emails in inbox</p>
                                        </div>
                                    )
                                )}
                            </div>
                        </div>
                    </div>
                );
            };

            const renderSent = () => {
                return (
                    <div className="space-y-6">
                        <div className="glass-effect rounded-3xl p-8 ai-glow">
                            <div className="flex justify-between items-center mb-6">
                                <h2 className="text-3xl font-bold text-gray-800">üì§ Sent</h2>
                                <div className="flex gap-3">
                                    {sentEmails.length > 0 && (
                                        <>
                                            {selectedEmails.length > 0 && (
                                                <button
                                                    onClick={() => handleDeleteSelected('sent')}
                                                    className="oval-button px-4 py-2 text-sm font-semibold text-white bg-red-500 hover:bg-red-600"
                                                >
                                                    üóëÔ∏è Delete Selected ({selectedEmails.length})
                                                </button>
                                            )}
                                            <button
                                                onClick={() => handleDeleteAll('sent')}
                                                className="oval-button px-4 py-2 text-sm font-semibold text-white bg-red-500 hover:bg-red-600"
                                            >
                                                üóëÔ∏è Delete All
                                            </button>
                                        </>
                                    )}
                                </div>
                            </div>

                            <div className="space-y-3">
                                {sentEmails.length > 0 ? (
                                    sentEmails.map((email, index) => (
                                        <div
                                            key={email.id}
                                            data-email-id={email.id}
                                            className="email-item email-ladder-animation glass-dark px-6 py-4 rounded-2xl relative hover:shadow-lg transition-all"
                                            style={{animationDelay: `${index * 0.05}s`}}
                                        >
                                            <div
                                                onClick={(e) => {
                                                    e.stopPropagation();
                                                    toggleEmailSelection(email.id);
                                                }}
                                                className={`email-checkbox ${selectedEmails.includes(email.id) ? 'checked' : ''}`}
                                                style={{
                                                    position: 'absolute',
                                                    left: '16px',
                                                    top: '16px'
                                                }}
                                            >
                                                {selectedEmails.includes(email.id) && <span style={{color: 'white', fontSize: '12px'}}>‚úì</span>}
                                            </div>

                                            <div className="email-hover-buttons">
                                                <button
                                                    onClick={(e) => {
                                                        e.stopPropagation();
                                                        handleDeleteEmail(email.id, 'sent');
                                                    }}
                                                    className="email-hover-btn"
                                                    style={{
                                                        background: 'rgba(239, 68, 68, 0.9)',
                                                        color: 'white',
                                                        border: 'none'
                                                    }}
                                                >
                                                    Delete
                                                </button>
                                            </div>

                                            <div style={{marginLeft: '40px'}}>
                                                <div className="flex justify-between items-start mb-2">
                                                    <span className="text-sm font-bold text-gray-800">To: {email.to}</span>
                                                    <span className="text-xs text-gray-500">{email.date}</span>
                                                </div>
                                                <div className="text-base font-semibold text-gray-700 mb-2">{email.subject}</div>
                                                <div className="text-sm text-gray-600">{email.snippet}</div>
                                            </div>
                                        </div>
                                    ))
                                ) : (
                                    <div className="text-center py-12 text-gray-500">
                                        <div className="text-6xl mb-4">üì≠</div>
                                        <p>No sent emails</p>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                );
            };

            const renderWriterContent = () => {
                return (
                    <div className="space-y-6 fade-in">
                        <div className="glass-dark rounded-full px-4 py-2 inline-flex items-center gap-2">
                            <span className="text-xl">‚úâÔ∏è</span>
                            <span className="text-sm font-semibold text-gray-700">Email Rewriter</span>
                        </div>

                        <div className="relative">
                            <div className="flex items-center justify-between mb-3">
                                <label className="text-sm font-medium text-gray-700 flex items-center">
                                    <span className="text-lg mr-2">‚úçÔ∏è</span>
                                    Paste your email content
                                </label>
                                <label className="px-4 py-2 glass-effect rounded-full text-gray-700 text-xs font-medium hover:bg-white/90 transition-all cursor-pointer border border-indigo-300">
                                    <span>üìé Upload File</span>
                                    <input type="file" accept=".txt,.eml" onChange={handleFileUpload} className="hidden" />
                                </label>
                            </div>

                            {uploadedFile ? (
                                <div className="glass-dark rounded-2xl p-4 mb-4">
                                    <div className="flex items-center justify-between">
                                        <div className="flex items-center gap-3">
                                            <span className="text-3xl">üìÑ</span>
                                            <div>
                                                <div className="text-sm font-semibold text-gray-800">{uploadedFile.name}</div>
                                                <div className="text-xs text-gray-600">{(uploadedFile.size / 1024).toFixed(2)} KB</div>
                                            </div>
                                        </div>
                                        <div className="flex gap-2">
                                            <button
                                                onClick={() => setViewingFile(uploadedFile)}
                                                className="px-3 py-1 glass-effect rounded-full text-xs text-gray-700 hover:bg-white/90"
                                            >
                                                üëÅÔ∏è View
                                            </button>
                                            <button
                                                onClick={() => setUploadedFile(null)}
                                                className="px-3 py-1 glass-effect rounded-full text-xs text-red-600 hover:bg-white/90"
                                            >
                                                ‚úï Remove
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            ) : (
                                <textarea
                                    value={emailText}
                                    onChange={(e) => setEmailText(e.target.value)}
                                    className="w-full h-80 px-6 py-4 custom-textarea rounded-2xl text-gray-800 placeholder-gray-500 resize-none"
                                    placeholder="Type or paste your email content here..."
                                />
                            )}
                        </div>

                        <div className="pt-4 border-t border-gray-300 space-y-4">
                            {showSuggestions && (
                                <div>
                                    <label className="text-sm font-medium text-gray-700 flex items-center mb-2">
                                        <span className="text-lg mr-2">üí°</span>
                                        Quick Actions
                                    </label>
                                    <div className="flex gap-2 overflow-x-auto pb-2">
                                        {generalSuggestions.map((suggestion) => (
                                            <button
                                                key={suggestion.id}
                                                onClick={() => setCustomPrompt(suggestion.prompt)}
                                                className="glass-effect font-medium hover:bg-white/90 oval-button px-4 py-1.5 rounded-full text-xs transition-all text-gray-800 border border-green-300 hover:border-green-500"
                                            >
                                                {suggestion.label}
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            )}

                            <div className="flex items-center justify-between">
                                <label className="text-sm font-medium text-gray-700 flex items-center">
                                    <span className="text-lg mr-2">üé®</span>
                                    Tone Styles
                                </label>
                                {showSuggestions && (
                                    <div className="flex gap-2 overflow-x-auto">
                                        {emailStyles.map((style) => (
                                            <button
                                                key={style.id}
                                                onClick={() => handleStyleClick(style.id)}
                                                className={`glass-effect font-medium hover:bg-white/90 oval-button px-4 py-1.5 rounded-full text-xs transition-all ${
                                                    selectedTone === style.id
                                                        ? 'bg-gradient-to-r from-indigo-500 to-purple-600 text-white border-2 border-indigo-600'
                                                        : 'text-gray-800 border border-indigo-300'
                                                }`}
                                            >
                                                {style.label}
                                            </button>
                                        ))}
                                    </div>
                                )}
                            </div>

                            {selectedTone && (
                                <div className="glass-dark rounded-xl p-3 flex items-center gap-3">
                                    <span className="text-2xl">{emailStyles.find(s => s.id === selectedTone)?.label}</span>
                                    <div className="flex-1">
                                        <div className="text-xs text-gray-600 mb-1">Selected Tone</div>
                                        <div className="flex items-center gap-2">
                                            <div className="h-1 flex-1 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full"></div>
                                            <span className="text-xs text-gray-700">Connected to prompt</span>
                                        </div>
                                    </div>
                                    <button
                                        onClick={() => setSelectedTone(null)}
                                        className="text-gray-500 hover:text-red-600"
                                    >
                                        ‚úï
                                    </button>
                                </div>
                            )}

                            <div className="flex gap-3">
                                <input
                                    type="text"
                                    value={customPrompt}
                                    onChange={(e) => setCustomPrompt(e.target.value)}
                                    className="flex-1 px-5 py-3 glass-effect border border-indigo-300 rounded-full text-gray-800 placeholder-gray-500"
                                    placeholder="e.g., 'Make it more casual' or 'Add urgency'"
                                    onKeyPress={(e) => e.key === 'Enter' && handleGenerate()}
                                />
                                <button
                                    onClick={handleGenerate}
                                    disabled={(!emailText && !uploadedFile) || (!selectedTone && !customPrompt)}
                                    className="px-8 py-3 glass-effect rounded-full text-gray-800 font-medium hover:bg-white/90 transition-all oval-button border-2 border-indigo-400 disabled:opacity-50 disabled:cursor-not-allowed"
                                >
                                    ‚ú® Generate
                                </button>
                            </div>
                        </div>
                    </div>
                );
            };

            const renderResultsContent = () => {
                if (isProcessing) {
                    return (
                        <div className="flex flex-col justify-center items-start h-96 space-y-8 px-6">
                            <div className="w-full space-y-4">
                                <div className="text-left mb-6">
                                    <p className="text-gray-700 text-xl font-semibold mb-2">‚ú® Generating with AI</p>
                                    <p className="text-gray-500 text-sm">Transforming your content...</p>
                                </div>
                                <div className="loading-lines">
                                    <div className="loading-line"></div>
                                    <div className="loading-line"></div>
                                    <div className="loading-line"></div>
                                    <div className="loading-line"></div>
                                    <div className="loading-line"></div>
                                    <div className="loading-line"></div>
                                </div>
                            </div>
                        </div>
                    );
                }

                if (result) {
                    return (
                        <div className="result-container px-6 py-4 relative">
                            <div className="relative">
                                <div className="action-buttons">
                                    <button
                                        onClick={() => navigator.clipboard.writeText(result)}
                                        className="action-btn text-gray-700 hover:text-indigo-700"
                                    >
                                        Copy
                                    </button>
                                    <button
                                        onClick={handleRetry}
                                        className="action-btn text-gray-700 hover:text-purple-700"
                                    >
                                        Retry
                                    </button>
                                </div>
                                <div className="glass-dark rounded-2xl p-6">
                                    <pre id="result-text" className="text-gray-800 whitespace-pre-wrap font-sans leading-relaxed text-left text-base"></pre>
                                </div>
                            </div>
                        </div>
                    );
                }

                return (
                    <div className="flex flex-col items-center justify-center h-96 text-gray-500">
                        <div className="text-7xl mb-4 opacity-40">ü§ñ</div>
                        <p className="text-lg text-gray-700">Your AI-generated content will appear here</p>
                        <p className="text-sm mt-2">Use the Writer tab to create something amazing!</p>
                    </div>
                );
            };

            return (
                <div className="min-h-screen relative">
                    {viewingEmail && (
                        <div className="email-viewer-overlay" onClick={() => setViewingEmail(null)}>
                            <div className="email-viewer-container" onClick={(e) => e.stopPropagation()}>
                                <div className="p-6 border-b border-gray-200 flex items-center justify-between">
                                    <button
                                        onClick={() => setViewingEmail(null)}
                                        className="px-4 py-2 glass-effect rounded-full text-gray-700 text-sm font-medium hover:bg-white/90 transition-all border border-indigo-300 flex items-center gap-2"
                                    >
                                        <span>‚Üê</span>
                                        <span>Back</span>
                                    </button>
                                    <div className="flex gap-2">
                                        <button
                                            onClick={() => handleSummarizeEmail(viewingEmail)}
                                            className="px-4 py-2 rounded-full text-white text-sm font-medium hover:opacity-90 transition-all"
                                            style={{
                                                background: 'linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)'
                                            }}
                                        >
                                            Summarize
                                        </button>
                                        <button
                                            onClick={() => {
                                                setEmailReply('');
                                                document.getElementById('reply-section')?.scrollIntoView({ behavior: 'smooth' });
                                            }}
                                            className="px-4 py-2 glass-effect rounded-full text-gray-700 text-sm font-medium hover:bg-white/90 transition-all border border-indigo-300"
                                        >
                                            Reply
                                        </button>
                                    </div>
                                </div>

                                <div className="flex-1 overflow-y-auto p-6">
                                    <div className="mb-4">
                                        <h2 className="text-2xl font-bold text-gray-800 mb-3">{viewingEmail.subject}</h2>
                                        <div className="flex justify-between items-center mb-4">
                                            <div>
                                                <div className="text-sm font-semibold text-gray-700">From: {viewingEmail.from}</div>
                                                <div className="text-xs text-gray-500 mt-1">{viewingEmail.date}</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div className="prose max-w-none">
                                        <p className="text-gray-700 leading-relaxed">{viewingEmail.snippet}</p>
                                    </div>

                                    {summarizingEmail === viewingEmail.id && (
                                        <div className="summary-popup mt-4" style={{position: 'relative', top: 0, marginTop: '16px'}}>
                                            {isSummarizing ? (
                                                <div className="space-y-3">
                                                    <div className="flex items-center gap-3 mb-3">
                                                        <div className="animate-spin rounded-full h-5 w-5 border-2 border-indigo-600 border-t-transparent"></div>
                                                        <span className="text-sm text-gray-700 font-medium">Summarizing...</span>
                                                    </div>
                                                    <div className="space-y-2">
                                                        <div className="loading-line" style={{height: '8px'}}></div>
                                                        <div className="loading-line" style={{height: '8px'}}></div>
                                                        <div className="loading-line" style={{height: '8px'}}></div>
                                                    </div>
                                                </div>
                                            ) : (
                                                <div>
                                                    <div className="flex justify-between items-center mb-2">
                                                        <span className="text-sm font-bold text-indigo-600">‚ú® Summary</span>
                                                        <button
                                                            onClick={() => setSummaryHidden(!summaryHidden)}
                                                            className="text-xs text-indigo-600 hover:text-indigo-800 font-semibold"
                                                        >
                                                            {summaryHidden ? 'Show' : 'Hide'}
                                                        </button>
                                                    </div>
                                                    {!summaryHidden && (
                                                        <p className="text-sm text-gray-700 leading-relaxed">{summaryText}</p>
                                                    )}
                                                </div>
                                            )}
                                        </div>
                                    )}

                                    <div id="reply-section" className="mt-8 pt-6 border-t border-gray-300">
                                        <h3 className="text-lg font-bold text-gray-800 mb-4">‚úçÔ∏è Write Reply</h3>

                                        <div className="relative mb-4">
                                            <textarea
                                                value={emailReply}
                                                onChange={(e) => setEmailReply(e.target.value)}
                                                className="w-full h-48 px-6 py-4 pr-24 custom-textarea rounded-2xl text-gray-800 placeholder-gray-500 resize-none"
                                                placeholder="Type your reply here..."
                                            />

                                            {emailReply && emailReply.trim().length > 0 && (
                                                <button
                                                    onClick={handleSendEmail}
                                                    disabled={isSending}
                                                    className="send-button-float"
                                                    style={{opacity: isSending ? 0.7 : 1, cursor: isSending ? 'not-allowed' : 'pointer'}}
                                                >
                                                    {isSending ? (
                                                        <>
                                                            <div className="animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"></div>
                                                            <span>Sending...</span>
                                                        </>
                                                    ) : (
                                                        <>
                                                            <span>‚Üí</span>
                                                            <span>Send</span>
                                                        </>
                                                    )}
                                                </button>
                                            )}
                                        </div>

                                        <div className="ai-transform-container">
                                            <input
                                                type="text"
                                                value={replyPrompt}
                                                onChange={(e) => setReplyPrompt(e.target.value)}
                                                className="ai-transform-input"
                                                placeholder="‚ú® Rewrite with AI (e.g., 'Make it more professional')"
                                                onKeyPress={(e) => {
                                                    if (e.key === 'Enter' && replyPrompt && emailReply) {
                                                        handleRewriteReply();
                                                    }
                                                }}
                                            />
                                            <button
                                                onClick={handleRewriteReply}
                                                disabled={!replyPrompt || !emailReply || isRewritingReply}
                                                className="ai-transform-button"
                                            >
                                                {isRewritingReply ? '‚ú® Rewriting...' : 'Rewrite'}
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* MOBILE NAV - ONLY SHOWS ON MOBILE */}
                    <button className="mobile-nav-toggle" onClick={() => setMobileNavOpen(!mobileNavOpen)}>
                        {mobileNavOpen ? '‚úï' : '‚ò∞'}
                    </button>

                    <div className={`mobile-nav-menu ${mobileNavOpen ? 'open' : ''}`}>
                        <button
                            onClick={() => { setCurrentPage('home'); setMobileNavOpen(false); }}
                            className={`px-6 py-2 rounded-full font-medium transition-all oval-button ${
                                currentPage === 'home'
                                    ? 'bg-gradient-to-r from-indigo-500 to-purple-600 text-white'
                                    : 'glass-dark text-gray-700 hover:bg-white/70'
                            }`}
                        >
                            Home
                        </button>
                        {emailConnected && (
                            <>
                                <button
                                    onClick={() => { setCurrentPage('inbox'); setMobileNavOpen(false); }}
                                    className={`px-6 py-2 rounded-full font-medium transition-all oval-button ${
                                        currentPage === 'inbox'
                                            ? 'bg-gradient-to-r from-indigo-500 to-purple-600 text-white'
                                            : 'glass-dark text-gray-700 hover:bg-white/70'
                                    }`}
                                >
                                    Inbox {newEmailCount > 0 && `(${newEmailCount})`}
                                </button>
                                <button
                                    onClick={() => { setCurrentPage('sent'); setMobileNavOpen(false); }}
                                    className={`px-6 py-2 rounded-full font-medium transition-all oval-button ${
                                        currentPage === 'sent'
                                            ? 'bg-gradient-to-r from-indigo-500 to-purple-600 text-white'
                                            : 'glass-dark text-gray-700 hover:bg-white/70'
                                    }`}
                                >
                                    Sent
                                </button>
                            </>
                        )}
                        <button
                            onClick={() => { setCurrentPage('settings'); setMobileNavOpen(false); }}
                            className={`px-6 py-2 rounded-full font-medium transition-all oval-button ${
                                currentPage === 'settings'
                                    ? 'bg-gradient-to-r from-indigo-500 to-purple-600 text-white'
                                    : 'glass-dark text-gray-700 hover:bg-white/70'
                            }`}
                        >
                            Settings
                        </button>
                    </div>

                    {/* DESKTOP NAV - ONLY AT TOP */}
                    <header className="sticky-header">
                        <div className="container mx-auto px-4 py-4">
                            <div className="desktop-nav flex justify-center items-center gap-4">
                                <button
                                    onClick={() => setCurrentPage('home')}
                                    className={`px-6 py-2 rounded-full font-medium transition-all oval-button ${
                                        currentPage === 'home'
                                            ? 'bg-gradient-to-r from-indigo-500 to-purple-600 text-white border-2 border-indigo-600'
                                            : 'glass-dark text-gray-700 hover:bg-white/70'
                                    }`}
                                >
                                    Home
                                </button>
                                {emailConnected && (
                                    <>
                                        <button
                                            onClick={() => setCurrentPage('inbox')}
                                            className={`px-6 py-2 rounded-full font-medium transition-all oval-button ${
                                                currentPage === 'inbox'
                                                    ? 'bg-gradient-to-r from-indigo-500 to-purple-600 text-white border-2 border-indigo-600'
                                                    : 'glass-dark text-gray-700 hover:bg-white/70'
                                            }`}
                                            style={{position: 'relative'}}
                                        >
                                            Inbox
                                            {newEmailCount > 0 && (
                                                <span className="new-email-badge">
                                                    {newEmailCount}
                                                </span>
                                            )}
                                        </button>
                                        <button
                                            onClick={() => setCurrentPage('sent')}
                                            className={`px-6 py-2 rounded-full font-medium transition-all oval-button ${
                                                currentPage === 'sent'
                                                    ? 'bg-gradient-to-r from-indigo-500 to-purple-600 text-white border-2 border-indigo-600'
                                                    : 'glass-dark text-gray-700 hover:bg-white/70'
                                            }`}
                                        >
                                            Sent
                                        </button>
                                    </>
                                )}
                                <button
                                    onClick={() => setCurrentPage('settings')}
                                    className={`px-6 py-2 rounded-full font-medium transition-all oval-button ${
                                        currentPage === 'settings'
                                            ? 'bg-gradient-to-r from-indigo-500 to-purple-600 text-white border-2 border-indigo-600'
                                            : 'glass-dark text-gray-700 hover:bg-white/70'
                                    }`}
                                >
                                    Settings
                                </button>
                            </div>
                        </div>
                    </header>

                    <div className="page-container relative z-10 container mx-auto px-4 py-8 max-w-8xl">
                        {currentPage === 'settings' ? renderSettings() :
                         currentPage === 'inbox' ? renderInbox() :
                         currentPage === 'sent' ? renderSent() : (
                            <>
                                <div className="rounded-3xl p-8 relative">
                                    <div className="flex justify-center mb-8">
                                        <div className="tab-container tab-button-container">
                                            <div 
                                                className="tab-slider"
                                                style={{
                                                    width: '50%',
                                                    height: 'calc(100% - 12px)',
                                                    top: '6px',
                                                    left: activeView === 'writer' ? '6px' : 'calc(50% - 6px)',
                                                }}
                                            ></div>
                                            <button
                                                onClick={() => setActiveView('writer')}
                                                className={`relative z-10 px-8 py-3 rounded-full font-medium transition-all ${
                                                    activeView === 'writer' ? 'text-white' : 'text-gray-700 hover:text-gray-800'
                                                }`}
                                            >
                                                ‚úçÔ∏è AI Writer
                                            </button>
                                            <button
                                                onClick={() => setActiveView('results')}
                                                className={`relative z-10 px-8 py-3 rounded-full font-medium transition-all ${
                                                    activeView === 'results' ? 'text-white' : 'text-gray-700 hover:text-gray-800'
                                                }`}
                                            >
                                                ‚ú® Results
                                            </button>
                                        </div>
                                    </div>

                                    <div className="min-h-[500px]">
                                        {activeView === 'writer' ? renderWriterContent() : renderResultsContent()}
                                    </div>
                                </div>
                            </>
                        )}
                    </div>

                    {showUndoDelete && (
                        <button
                            onClick={handleUndoDelete}
                            className="undo-delete-button"
                        >
                            <span>‚Ü©Ô∏è</span>
                            <span>Undo Delete</span>
                        </button>
                    )}

                    {showEnvelope && (
                        <div style={{
                            position: 'fixed',
                            bottom: '20px',
                            right: '20px',
                            fontSize: '48px',
                            zIndex: 10000,
                            animation: 'envelope-fly 1.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards'
                        }}>
                            üìß
                        </div>
                    )}
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
